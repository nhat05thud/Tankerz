@page
@using Tankerz.Localization
@using Tankerz.Web.Pages.Products
@using Microsoft.Extensions.Localization
@using Volo.Abp.AspNetCore.Mvc.UI.Bootstrap.TagHelpers.Modal
@model CreateModalModel
@inject IStringLocalizer<TankerzResource> L
@{
    Layout = null;
}
<form asp-page="/Products/CreateModal" onkeydown="return event.key != 'Enter';" id="form-with-ck">
    <abp-input asp-for="Product.ProductCategoryId" />
    <abp-modal centered="true" scrollable="true" size="ExtraLarge" id="myModal">
        <abp-modal-header class="text-uppercase" title="Thêm mới tin tức"></abp-modal-header>
        <abp-modal-body class="custom-modal-body">
            <!-- Nav -->
            <div class="text-left">
                <ul class="nav nav-segment nav-pills mb-2" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" id="nav-one-eg1-tab" data-toggle="pill" href="#nav-one-eg1" role="tab" aria-controls="nav-one-eg1" aria-selected="true">Thông tin</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="nav-two-eg1-tab" data-toggle="pill" href="#nav-two-eg1" role="tab" aria-controls="nav-two-eg1" aria-selected="false">SEO</a>
                    </li>
                </ul>
            </div>
            <div class="tab-content">
                <div class="tab-pane fade show active" id="nav-one-eg1" role="tabpanel" aria-labelledby="nav-one-eg1-tab">
                    <div class="row">
                        <div class="col-custom-3">
                            <div class="modal-custom-content">
                                <p class="section-modal-title">Hình đại diện</p>
                                <div id="single-media-picker">
                                    <abp-input type="hidden" v-model="jsonPostString" asp-for="Product.Image" />
                                    <file v-bind:ismultiple="false" v-bind:jsonpoststring="''" v-on:pass_data_to_parent="passDataToParent"></file>
                                </div>
                            </div>
                            <div class="modal-custom-content">
                                <p class="section-modal-title">Thuộc tính:</p>
                                <abp-input asp-for="Product.IsPublish" label="Hiển thị" />
                                <abp-input asp-for="Product.IsShowOnHomePage" label="Show → Trang chủ" />
                                <br />
                                <abp-input asp-for="Product.Priority" label="Số thứ tự" />
                                <abp-input asp-for="Product.ProductCategoryName" disabled="true" label="Danh mục" />
                            </div>
                        </div>
                        <div class="col-custom-9">
                            <div class="modal-custom-content">
                                <p class="section-modal-title">Banner</p>
                                <div id="multiple-media-picker">
                                    <abp-input type="hidden" v-model="jsonPostString" asp-for="Product.Banners" />
                                    <file v-bind:ismultiple="true" v-bind:jsonpoststring="''" v-on:pass_data_to_parent="passDataToParent"></file>
                                </div>
                            </div>
                            <div class="modal-custom-content">
                                <abp-input asp-for="Product.Name" />
                                <abp-input asp-for="Product.Price" />
                                <abp-input asp-for="Product.OldPrice" />
                                <abp-input asp-for="Product.Description" />
                                <abp-input asp-for="Product.Content" />
                            </div>
                            <div class="modal-custom-content">
                                <p class="section-modal-title">Hình ảnh liên quan</p>
                                <div id="multiple-media-picker-product">
                                    <abp-input type="hidden" v-model="jsonPostString" asp-for="Product.ListImages" />
                                    <file v-bind:ismultiple="true" v-bind:jsonpoststring="''" v-on:pass_data_to_parent="passDataToParent"></file>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="nav-two-eg1" role="tabpanel" aria-labelledby="nav-two-eg1-tab">
                    <div class="modal-custom-content">
                        <abp-input asp-for="Product.MetaTitle" />
                        <abp-input asp-for="Product.MetaDescription" />
                        <abp-input asp-for="Product.MetaKeyword" />
                        <abp-input asp-for="Product.MetaTag" />
                    </div>
                    <div class="modal-custom-content">
                        <p class="section-modal-title">Meta Thumbnail</p>
                        <div id="meta-media-picker">
                            <abp-input type="hidden" v-model="jsonPostString" asp-for="Product.MetaThumbnail" />
                            <file v-bind:ismultiple="false" v-bind:jsonpoststring="''" v-on:pass_data_to_parent="passDataToParent"></file>
                        </div>
                    </div>
                </div>
            </div>
        </abp-modal-body>
        <abp-modal-footer buttons="@(AbpModalButtons.Cancel|AbpModalButtons.Save)"></abp-modal-footer>
    </abp-modal>
    <abp-script src="/assets/js/mediapicker.js" />
    <script>
        var description = CKEDITOR.replace('Product_Description', {
            filebrowserBrowseUrl: '/MediaManagement',
            customConfig: '/custom/ckeditor_config.js'
        });
        description.on('change', function () {
            updateAllMessageForms()
        });
        var content = CKEDITOR.replace('Product_Content', {
            filebrowserBrowseUrl: '/MediaManagement',
            customConfig: '/custom/ckeditor_config.js'
        });
        content.on('change', function () {
            updateAllMessageForms()
        });
        function updateAllMessageForms() {
            for (instance in CKEDITOR.instances) {
                CKEDITOR.instances[instance].updateElement();
            }
        }
    </script>
</form>